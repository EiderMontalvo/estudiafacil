<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EstudiaFácil - Plataforma Educativa</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="sections.css">
  <link rel="stylesheet" href="components.css">
  <link rel="stylesheet" href="navbar.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📚</text></svg>">
  <meta name="description" content="EstudiaFácil - Plataforma educativa colaborativa moderna">
  <meta name="theme-color" content="#00f5ff">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loadingScreen" class="loading-screen">
    <div class="loader">
      <div class="book-animation">
        <div class="book">
          <div class="page page1"></div>
          <div class="page page2"></div>
          <div class="page page3"></div>
        </div>
      </div>
      <div class="loading-text">
        <h2>EstudiaFácil</h2>
        <p id="loadingMessage">Inicializando...</p>
        <div class="progress-bar">
          <div class="progress-fill"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Navbar Superior (Brand + Auth) -->
  <nav class="navbar">
    <div class="navbar-container">
      <!-- Brand -->
      <div class="navbar-brand">
        <div class="brand-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25A8.966 8.966 0 0 1 18 3.75c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <h1 class="brand-title">EstudiaFácil</h1>
      </div>

      <!-- Auth -->
      <div class="navbar-auth">
        <button id="loginBtn" class="btn-login">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="btn-text">Iniciar Sesión</span>
        </button>
        
        <div id="userProfile" class="user-profile" style="display: none;">
          <div class="user-avatar">
            <img id="userAvatar" src="" alt="Avatar">
            <div class="status-dot online"></div>
          </div>
          <div class="user-info">
            <div class="user-name" id="userName"></div>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Navegación de Contenido -->
  <nav class="content-nav" id="contentNav">
    <div class="nav-container">
      <button class="nav-item active" data-section="dashboard" title="Inicio">
        <div class="nav-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="nav-label">Inicio</span>
      </button>
      
      <button class="nav-item" data-section="resources" title="Recursos">
        <div class="nav-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="nav-label">Recursos</span>
      </button>
      
      <button class="nav-item" data-section="surveys" title="Encuestas">
        <div class="nav-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 11H5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2zM21 11h-4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="nav-label">Encuestas</span>
      </button>
      
      <button class="nav-item" data-section="opinions" title="Opiniones">
        <div class="nav-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="nav-label">Opiniones</span>
      </button>
      
      <button class="nav-item" data-section="profile" title="Perfil">
        <div class="nav-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <span class="nav-label">Perfil</span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-container">
    
    <!-- Dashboard Section -->
    <section id="dashboardSection" class="content-section active">
      <!-- Welcome Hero -->
      <div id="welcomeHero" class="welcome-hero">
        <div class="hero-content">
          <div class="hero-icon">🎓</div>
          <h1 class="hero-title">Bienvenido a EstudiaFácil</h1>
          <p class="hero-subtitle">Plataforma educativa colaborativa moderna</p>
          
          <div class="hero-features">
            <div class="feature-card">
              <div class="feature-icon">📚</div>
              <h3>Recursos Educativos</h3>
              <p>Comparte y descarga materiales de estudio de calidad</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">📋</div>
              <h3>Encuestas Interactivas</h3>
              <p>Crea y participa en cuestionarios educativos</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">💭</div>
              <h3>Opiniones Colaborativas</h3>
              <p>Participa en discusiones académicas enriquecedoras</p>
            </div>
          </div>

          <div class="hero-actions">
            <button class="btn-hero-primary" id="heroLoginBtn">
              <span class="btn-text">Comenzar Ahora</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Dashboard Content -->
      <div id="dashboardContent" class="dashboard-content" style="display: none;">
        <div class="dashboard-header">
          <div class="dashboard-welcome">
            <h1>Mi Espacio Educativo</h1>
            <p>Resumen de tu actividad y progreso académico</p>
          </div>
        </div>

        <div class="stats-container">
          <div class="stat-card">
            <div class="stat-icon">📚</div>
            <div class="stat-content">
              <div class="stat-number" id="totalResources">0</div>
              <div class="stat-label">Recursos</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">📋</div>
            <div class="stat-content">
              <div class="stat-number" id="totalSurveys">0</div>
              <div class="stat-label">Encuestas</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">💭</div>
            <div class="stat-content">
              <div class="stat-number" id="totalOpinions">0</div>
              <div class="stat-label">Opiniones</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">👥</div>
            <div class="stat-content">
              <div class="stat-number" id="totalUsers">0</div>
              <div class="stat-label">Comunidad</div>
            </div>
          </div>
        </div>

        <div class="dashboard-grid">
          <div class="activity-panel">
            <div class="panel-header">
              <h3>Actividad Reciente</h3>
            </div>
            <div id="recentActivity" class="activity-list">
              <div class="activity-placeholder">
                <div class="placeholder-icon">📊</div>
                <p>Tu actividad aparecerá aquí</p>
              </div>
            </div>
          </div>

          <div class="categories-panel">
            <div class="panel-header">
              <h3>Categorías Populares</h3>
            </div>
            <div id="topCategories" class="categories-list">
              <div class="activity-placeholder">
                <div class="placeholder-icon">📂</div>
                <p>Las categorías aparecerán aquí</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Resources Section -->
    <section id="resourcesSection" class="content-section">
      <div class="section-header">
        <div class="section-title-group">
          <h2>Recursos Educativos</h2>
          <p>Materiales de estudio compartidos por la comunidad</p>
        </div>
        <button id="addResourceBtn" class="btn-primary">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="btn-text">Nuevo Recurso</span>
        </button>
      </div>

      <div class="filters-container">
        <div class="search-group">
          <div class="search-input-container">
            <div class="search-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <input type="text" id="searchInput" class="search-input" placeholder="Buscar recursos educativos...">
          </div>
        </div>
        <div class="filters-group">
          <select id="filterCategoria" class="filter-select">
            <option value="">Todas las categorías</option>
            <option value="apuntes">Apuntes</option>
            <option value="examenes">Exámenes</option>
            <option value="proyectos">Proyectos</option>
            <option value="libros">Libros</option>
          </select>
        </div>
      </div>

      <div class="resources-grid">
        <div id="listaRecursos" class="resources-list"></div>
        <div id="pdfRecursosContainer"></div>
        <div id="emptyState" class="empty-state" style="display: none;">
          <div class="empty-icon">📚</div>
          <h3>No hay recursos disponibles</h3>
          <p>Sé el primero en compartir un recurso educativo</p>
        </div>
      </div>
    </section>

    <!-- Surveys Section -->
    <section id="surveysSection" class="content-section">
      <div class="section-header">
        <div class="section-title-group">
          <h2>Encuestas Educativas</h2>
          <p>Cuestionarios interactivos para el aprendizaje</p>
        </div>
        <button id="addSurveyBtn" class="btn-primary">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="btn-text">Nueva Encuesta</span>
        </button>
      </div>
      <div class="surveys-grid">
        <div id="surveysList" class="surveys-list"></div>
      </div>
    </section>

    <!-- Survey Participation Section -->
    <section id="surveyParticipationSection" class="content-section">
      <div class="section-header">
        <div class="section-title-group">
          <h2 id="surveyParticipationTitle">Participar en Encuesta</h2>
          <p id="surveyParticipationDesc">Responde las preguntas de la encuesta</p>
        </div>
        <button id="backToSurveysBtn" class="btn-secondary">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="btn-text">Volver a Encuestas</span>
        </button>
      </div>

      <div id="surveyParticipationContainer" class="survey-participation-container">
        <div class="survey-info-card">
          <h3 id="surveyInfoTitle">Título de la Encuesta</h3>
          <p id="surveyInfoDescription">Descripción de la encuesta</p>
          <div class="survey-meta">
            <span id="surveyInfoAuthor">Por: Autor</span>
            <span id="surveyInfoQuestions">Preguntas: 0</span>
          </div>
        </div>

        <form id="surveyParticipationForm" class="survey-form">
          <div id="surveyQuestionsContainer" class="survey-questions-container">
            <!-- Las preguntas se cargarán dinámicamente aquí -->
          </div>
          
          <div class="survey-form-actions">
            <button type="button" id="cancelParticipation" class="btn-secondary">Cancelar</button>
            <button type="submit" class="btn-primary">
              <span class="btn-text">Enviar Respuestas</span>
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- Opinions Section -->
    <section id="opinionsSection" class="content-section">
      <div class="section-header">
        <div class="section-title-group">
          <h2>Opiniones y Debates</h2>
          <p>Discusiones académicas y colaborativas</p>
        </div>
        <button id="addOpinionBtn" class="btn-primary">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="btn-text">Nueva Opinión</span>
        </button>
      </div>

      <div id="opinionForm" class="opinion-form-container" style="display: none;">
        <form id="opinionFormElement" class="opinion-form">
          <div class="form-header">
            <h3>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Comparte tu Opinión
            </h3>
            <button type="button" id="cancelOpinion" class="btn-close-form">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          
          <div class="form-body">
            <div class="form-group">
              <label for="opinionTitle" class="form-label">Título *</label>
              <input type="text" id="opinionTitle" class="form-input" placeholder="¿Sobre qué quieres opinar?" required>
            </div>
            
            <div class="form-group">
              <label for="opinionContent" class="form-label">Contenido *</label>
              <textarea id="opinionContent" class="form-textarea" placeholder="Comparte tu opinión..." rows="4" required></textarea>
            </div>
            
            <div class="form-row">
              <div class="form-group">
                <label for="opinionCategory" class="form-label">Categoría</label>
                <select id="opinionCategory" class="form-select">
                  <option value="experiencia">Experiencia Personal</option>
                  <option value="pregunta">Pregunta Académica</option>
                  <option value="consejo">Consejo de Estudio</option>
                  <option value="debate">Tema de Debate</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="opinionSubject" class="form-label">Materia</label>
                <input type="text" id="opinionSubject" class="form-input" placeholder="Ej: Matemáticas, Historia...">
              </div>
            </div>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn-secondary" id="cancelOpinionBtn">Cancelar</button>
            <button type="submit" class="btn-primary">
              <span class="btn-text">Publicar Opinión</span>
            </button>
          </div>
        </form>
      </div>

      <div id="opinionsList" class="opinions-list"></div>
    </section>

    <!-- Profile Section -->
    <section id="profileSection" class="content-section">
      <div class="section-header">
        <div class="section-title-group">
          <h2>Mi Perfil</h2>
          <p>Información personal y actividad</p>
        </div>
        <div class="profile-logout">
          <button id="profileLogoutBtn" class="btn-profile-logout">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Cerrar Sesión</span>
          </button>
        </div>
      </div>

      <div class="profile-container">
        <div class="profile-card">
          <div class="profile-header">
            <div class="profile-avatar-container">
              <img id="profileAvatar" src="" alt="Avatar" class="profile-avatar">
              <div class="status-indicator online"></div>
            </div>
            <div class="profile-info">
              <h3 id="profileName" class="profile-name">Usuario</h3>
              <p id="profileEmail" class="profile-email">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                email@ejemplo.com
              </p>
            </div>
          </div>
          
          <div class="profile-stats-grid">
            <div class="profile-stat">
              <div class="stat-icon">📚</div>
              <div class="stat-info">
                <span class="stat-number" id="profileResources">0</span>
                <span class="stat-label">Recursos</span>
              </div>
            </div>
            <div class="profile-stat">
              <div class="stat-icon">📋</div>
              <div class="stat-info">
                <span class="stat-number" id="profileSurveys">0</span>
                <span class="stat-label">Encuestas</span>
              </div>
            </div>
            <div class="profile-stat">
              <div class="stat-icon">💭</div>
              <div class="stat-info">
                <span class="stat-number" id="profileOpinions">0</span>
                <span class="stat-label">Opiniones</span>
              </div>
            </div>
          </div>
        </div>

        <div class="activity-timeline-container">
          <div class="timeline-header">
            <h3>
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <polyline points="22,12 18,12 15,21 9,3 6,12 2,12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Actividad Reciente
            </h3>
          </div>
          <div id="userActivity" class="activity-timeline">
            <div class="activity-placeholder">
              <div class="placeholder-icon">📊</div>
              <p>Tu actividad aparecerá aquí</p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal para Recursos -->
  <div id="uploadModal" class="modal" style="display: none;">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Subir Nuevo Recurso</h3>
        <button class="modal-close" id="closeUploadModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <form id="uploadForm" class="modal-form">
        <div class="modal-body">
          <div class="form-group">
            <label for="titulo" class="form-label">Título del Recurso *</label>
            <input type="text" id="titulo" class="form-input" placeholder="Ingresa un título descriptivo" required>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="categoria" class="form-label">Categoría *</label>
              <select id="categoria" class="form-select" required>
                <option value="">Seleccionar categoría</option>
                <option value="apuntes">📝 Apuntes</option>
                <option value="examenes">📊 Exámenes</option>
                <option value="proyectos">🚀 Proyectos</option>
                <option value="libros">📚 Libros</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="materia" class="form-label">Materia *</label>
              <input type="text" id="materia" class="form-input" placeholder="Ej: Matemáticas, Historia..." required>
            </div>
          </div>



          <div class="form-group">
            <label for="descripcion" class="form-label">Descripción</label>
            <textarea id="descripcion" class="form-textarea" placeholder="Describe el contenido del recurso..." rows="3"></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">Archivo del Recurso *</label>
            <div class="uploadcare-container">
              <input 
                type="hidden" 
                role="uploadcare-uploader" 
                data-public-key="c5b430800e90bbb293c0"
                data-tabs="file camera url"
                data-multiple="false"
                data-preview-step="true"
                data-clearable="true"
                data-max-size="50000000"
                data-locale="es"
                id="archivo" 
              />
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-secondary" id="cancelUpload">Cancelar</button>
          <button type="submit" class="btn-primary">
            <span class="btn-text">Guardar Recurso</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para Encuestas -->
  <div id="surveyModal" class="modal large" style="display: none;">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Crear Nueva Encuesta</h3>
        <button class="modal-close" id="closeSurveyModal">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      
      <form id="surveyForm" class="modal-form">
        <div class="modal-body">
          <div class="form-group">
            <label for="surveyTitle" class="form-label">Título de la Encuesta *</label>
            <input type="text" id="surveyTitle" class="form-input" placeholder="Ingresa el título de tu encuesta" required>
          </div>

          <div class="form-group">
            <label for="surveyDescription" class="form-label">Descripción</label>
            <textarea id="surveyDescription" class="form-textarea" placeholder="Describe el propósito de tu encuesta..." rows="2"></textarea>
          </div>

          <div class="form-group">
            <label for="surveyCategory" class="form-label">Categoría *</label>
            <select id="surveyCategory" class="form-select" required>
              <option value="">Seleccionar categoría</option>
              <option value="estudio">📚 Métodos de Estudio</option>
              <option value="materias">📖 Evaluación de Materias</option>
              <option value="tecnologia">💻 Tecnología Educativa</option>
              <option value="general">🌟 Opinión General</option>
            </select>
          </div>

          <div class="questions-section">
            <div class="questions-header">
              <h4>Preguntas de la Encuesta</h4>
              <button type="button" id="addQuestionBtn" class="btn-outline">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="btn-text">Agregar Pregunta</span>
              </button>
            </div>
            <div id="questionsList" class="questions-container"></div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-secondary" id="cancelSurvey">Cancelar</button>
          <button type="submit" class="btn-primary">
            <span class="btn-text">Crear Encuesta</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="footer-logo">
            <span class="footer-icon">📚</span>
            <span class="footer-title">EstudiaFácil</span>
          </div>
          <p class="footer-description">
            Plataforma educativa colaborativa que conecta estudiantes 
            para compartir conocimiento y recursos académicos
          </p>
        </div>
        
        <div class="footer-stats">
          <div class="footer-stat">
            <span class="stat-number" id="footerUsers">0</span>
            <span class="stat-label">Estudiantes</span>
          </div>
          <div class="footer-stat">
            <span class="stat-number" id="footerResources">0</span>
            <span class="stat-label">Recursos</span>
          </div>
          <div class="footer-stat">
            <span class="stat-number" id="footerSurveys">0</span>
            <span class="stat-label">Encuestas</span>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2025 EstudiaFácil - Plataforma Educativa</p>
      </div>
    </div>
  </footer>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- Confirmation Modal -->
  <div id="confirmModal" class="modal small" style="display: none;">
    <div class="modal-overlay"></div>
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="confirmTitle">Confirmar Acción</h3>
      </div>
      <div class="modal-body">
        <p id="confirmMessage">¿Estás seguro de continuar?</p>
      </div>
      <div class="modal-footer">
        <button id="confirmCancel" class="btn-secondary">Cancelar</button>
        <button id="confirmOk" class="btn-primary">Confirmar</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js" async></script>
  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="main.js"></script>
  <script type="module" src="modules.js"></script>
  <script type="module" src="navbar.js"></script>

  <script>

    // Navegación y UI básica
    document.addEventListener('DOMContentLoaded', function() {
      const navItems = document.querySelectorAll('.nav-item');
      function setActiveSection(sectionId) {
        document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        const section = document.getElementById(sectionId + 'Section');
        if (section) section.classList.add('active');
        const navItem = document.querySelector(`[data-section="${sectionId}"]`);
        if (navItem) navItem.classList.add('active');
        localStorage.setItem('activeSection', sectionId);
      }
      navItems.forEach(item => {
        item.addEventListener('click', function() {
          const section = this.dataset.section;
          if (section) setActiveSection(section);
        });
      });
      const savedSection = localStorage.getItem('activeSection') || 'dashboard';
      setActiveSection(savedSection);
      // Configurar botón hero login CORREGIDO
      const heroLoginBtn = document.getElementById('heroLoginBtn');
      if (heroLoginBtn) {
        heroLoginBtn.addEventListener('click', handleHeroLogin);
      }
      // Asignar evento seguro al botón de login
      const loginBtn = document.getElementById('loginBtn');
      if (loginBtn) {
        loginBtn.addEventListener('click', function(e) {
          e.preventDefault();
          if (window.signInWithGoogle) {
            window.signInWithGoogle();
          }
        });
      }
    });

    // FUNCIÓN HERO LOGIN CORREGIDA
    function handleHeroLogin() {
      console.log('🚀 Hero login clicked');
      
      try {
        // Verificar si ya está logueado
        if (window.getCurrentUser && window.getCurrentUser()) {
          console.log('✅ User already logged in, navigating to dashboard');
          setActiveSection('dashboard');
          return;
        }
        
        // Intentar login directo con Firebase
        if (window.signInWithGoogle) {
          console.log('🔑 Executing Google login directly');
          window.signInWithGoogle()
            .then(user => {
              console.log('✅ Login successful:', user);
              setActiveSection('dashboard');
            })
            .catch(error => {
              console.error('❌ Login error:', error);
              showToast('Error al iniciar sesión. Intenta de nuevo.', 'error');
            });
        } else if (window.auth && window.auth.signInWithGoogle) {
          console.log('🔑 Executing auth.signInWithGoogle');
          window.auth.signInWithGoogle();
        } else {
          console.log('⚠️ No direct auth function found, trying login button click');
          const loginBtn = document.getElementById('loginBtn');
          if (loginBtn) {
            loginBtn.click();
          } else {
            console.error('❌ No login method available');
            showToast('Sistema de autenticación no disponible', 'error');
          }
        }
      } catch (error) {
        console.error('❌ Error in handleHeroLogin:', error);
        showToast('Error inesperado. Intenta de nuevo.', 'error');
      }
    }

    // Función helper para cambiar sección
    function setActiveSection(sectionId) {
      document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
      
      const section = document.getElementById(sectionId + 'Section');
      if (section) section.classList.add('active');
      
      const navItem = document.querySelector(`[data-section="${sectionId}"]`);
      if (navItem) navItem.classList.add('active');
      
      localStorage.setItem('activeSection', sectionId);
    }

    // Función helper para mostrar toast
    function showToast(message, type = 'info') {
      if (window.showToast) {
        window.showToast(message, type);
      } else {
        console.log(`Toast ${type}: ${message}`);
      }
    }

    function toggleSectionsForAuth(isLoggedIn) {
      const welcomeHero = document.getElementById('welcomeHero');
      const dashboardContent = document.getElementById('dashboardContent');
      const contentNav = document.getElementById('contentNav');
      const userProfile = document.getElementById('userProfile');
      const loginBtn = document.getElementById('loginBtn');
      
      if (welcomeHero) welcomeHero.style.display = isLoggedIn ? 'none' : 'block';
      if (dashboardContent) dashboardContent.style.display = isLoggedIn ? 'block' : 'none';
      if (contentNav) contentNav.style.display = isLoggedIn ? 'block' : 'none';
      if (userProfile) userProfile.style.display = isLoggedIn ? 'flex' : 'none';
      if (loginBtn) loginBtn.style.display = isLoggedIn ? 'none' : 'flex';
    }
    
    function updateAuthStatus(status) {
      // Función placeholder para compatibilidad
      console.log('Auth status:', status);
    }
    
    // Exportar funciones globalmente
    window.toggleSectionsForAuth = toggleSectionsForAuth;
    window.updateAuthStatus = updateAuthStatus;
    window.handleHeroLogin = handleHeroLogin;
    window.setActiveSection = setActiveSection;
  </script>
</body>
</html>